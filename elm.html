<!DOCTYPE html>
<html lang=”en-GB”>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <title>Elm Architecture Simple Counter</title>
  <link rel="shortcut icon" href="http://www.dwyl.io/images/favicon.ico" type="image/x-icon">
</head>

<body>
  <div id="app"></div>
<script>
// ==================================== mount function ====================================

function mount(muv, $root) {
  var model = muv.model,
      update = muv.update,
      view = muv.view;

  // initial state
  var state = model;
  // signal function takes action and returns callback
  var signal = function signal(action) {
    return function () {
      // update state
      state = update(state, action);
      // rerender
      empty($root)
      view(signal, state).forEach(function(el) { $root.appendChild(el) });
    };
  };
  // initial render
  view(signal, state).forEach(function(el) { $root.appendChild(el) });
}
// ==================================== the component ====================================

var Inc = 'inc'
var Dec = 'dec'

function update(model, action) {
  switch(action) {
    case Inc: return model + 1
    case Dec: return model - 1
    default: return model
  }
}

function view(signal, model) {
  var div = document.createElement('div');
  
  return [
    button('+', signal, Inc),
    document.createTextNode(model),
    button('-', signal, Dec)
  ];
}
    
function empty(node) { // http://stackoverflow.com/a/3955238/1148249
  while (node.firstChild) {
      node.removeChild(node.firstChild);
  }
}
    
function button(value, signal, action) { // http://stackoverflow.com/a/8650996/1148249
  var button = document.createElement("input");
    button.type = "button";
    button.value = value;
    button.onclick = signal(action);
  return button
}    
    
// ==================================== init app ====================================
    
 mount({model: 0, update, view}, document.getElementById('app'));
</script>
</body>
</html>